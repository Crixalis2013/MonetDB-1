stdout of test 'decimal_vs_integer.Bug-3941` in directory 'sql/test/BugTracker-2016` itself:


# 17:47:37 >  
# 17:47:37 >  "mclient" "-lsql" "-ftest" "-tnone" "-Eutf-8" "-i" "-e" "--host=/var/tmp/mtest-267962" "--port=32762"
# 17:47:37 >  

#set optimizer = 'sequential_pipe';
#start transaction;
#create table tmp(i decimal(8));
#create procedure profiler.starttrace() external name profiler."starttrace";
#create procedure profiler.stoptrace() external name profiler.stoptrace;
#select count(*) from tmp where i = 20160222;
% sys.%1 # table_name
% %1 # name
% bigint # type
% 1 # length
[ 0	]
#select count(*) from sys.tracelog() where stmt like '%batcalc.int%' or stmt like '%batcalc.lng%'; --no conversions
% .%2 # table_name
% %2 # name
% bigint # type
% 1 # length
[ 0	]
#select count(*) from tmp where i = 20160222;
% sys.%1 # table_name
% %1 # name
% bigint # type
% 1 # length
[ 0	]
#select count(*) from tmp where i = '20160222';
% sys.%1 # table_name
% %1 # name
% bigint # type
% 1 # length
[ 0	]
#select count(*) from sys.tracelog() where stmt like '%batcalc.int%' or stmt like '%batcalc.lng%'; --no conversions
% .%2 # table_name
% %2 # name
% bigint # type
% 1 # length
[ 0	]
#select count(*) from tmp where i = '20160222';
% sys.%1 # table_name
% %1 # name
% bigint # type
% 1 # length
[ 0	]
#select count(*) from tmp where i = 201602221;
% .%1 # table_name
% %1 # name
% bigint # type
% 1 # length
[ 0	]
#select count(*) from sys.tracelog() where stmt like '%batcalc.int%'; -- convert to int
% .%2 # table_name
% %2 # name
% bigint # type
% 1 # length
[ 1	]
#select count(*) from sys.tracelog() where stmt like '%batcalc.lng%'; -- no conversion to lng
% .%2 # table_name
% %2 # name
% bigint # type
% 1 # length
[ 0	]
#select count(*) from tmp where i = 201602221;
% .%1 # table_name
% %1 # name
% bigint # type
% 1 # length
[ 0	]
#rollback;
#set optimizer = 'default_pipe';

# 17:47:37 >  
# 17:47:37 >  "Done."
# 17:47:37 >  

