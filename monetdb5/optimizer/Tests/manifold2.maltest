statement ok
b:= bat.new(:dbl)

statement ok
b2:= bat.new(:dbl)

statement ok
function tst(b:bat[:dbl],b2:bat[:dbl]);
	c:= aggr.count(b);
	c2:= aggr.count(b2);
	z:bat[:dbl]:= mal.multiplex("calc","max",b,b2);
	io.print(z,b,b2);
end tst

statement ok
optimizer.dataflow("user","tst")

#mdb.List("user","tst")

query T rowsort
mdb.var("user","tst")
----
#[12]   X_6 (0,0,0) =  :str   not used 

statement ok
optimizer.multiplex("user","tst")

#mdb.List("user","tst")


